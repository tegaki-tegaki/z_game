[gd_scene load_steps=10 format=3 uid="uid://yl3cvf80okdl"]

[ext_resource type="Script" uid="uid://h78jvel3mra1" path="res://world/main.gd" id="1_gjxf3"]
[ext_resource type="Script" uid="uid://dxcarwrlyhg8v" path="res://models/sound_pool.gd" id="2_cmo1i"]
[ext_resource type="PackedScene" uid="uid://dldjrbdrv6itq" path="res://world/terrain.tscn" id="2_spvjk"]
[ext_resource type="Script" uid="uid://cli7snpvqc4rp" path="res://scripts/debug.gd" id="3_4f7fj"]
[ext_resource type="Texture2D" uid="uid://sb6a0kw03msc" path="res://images/normal.png" id="4_spvjk"]
[ext_resource type="Script" uid="uid://cewhxitaipg70" path="res://world/help_menu.gd" id="5_i1eo7"]

[sub_resource type="Resource" id="Resource_i1eo7"]
script = ExtResource("2_cmo1i")
sounds = Array[AudioStream]([])
metadata/_custom_type_script = "uid://dxcarwrlyhg8v"

[sub_resource type="AtlasTexture" id="AtlasTexture_cmo1i"]
atlas = ExtResource("4_spvjk")
region = Rect2(0, 6176, 32, 32)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_cmo1i"]
bg_color = Color(0, 0, 0, 1)

[node name="main" type="Node2D"]
script = ExtResource("1_gjxf3")
game_over = SubResource("Resource_i1eo7")

[node name="terrain" parent="." instance=ExtResource("2_spvjk")]
unique_name_in_owner = true

[node name="items" type="Node2D" parent="."]
unique_name_in_owner = true

[node name="enemies" type="Node2D" parent="."]

[node name="bullets" type="Node2D" parent="."]
unique_name_in_owner = true

[node name="raycasts" type="Node2D" parent="bullets"]

[node name="decals" type="Node2D" parent="bullets"]

[node name="audio" type="Node2D" parent="."]
unique_name_in_owner = true

[node name="ambience" type="AudioStreamPlayer2D" parent="audio"]

[node name="UI" type="AudioStreamPlayer2D" parent="audio"]

[node name="debug_target" type="Node2D" parent="."]
visible = false

[node name="Line2D" type="Line2D" parent="debug_target"]
points = PackedVector2Array(8, -8, -8, 8)
width = 1.0

[node name="Line2D2" type="Line2D" parent="debug_target"]
position = Vector2(-0.25, 0.25)
scale = Vector2(0.970588, 0.970588)
points = PackedVector2Array(-7.98485, -8.5, 8.5, 7.98485)
width = 1.0

[node name="interact_target" type="Sprite2D" parent="."]
unique_name_in_owner = true
visible = false
texture = SubResource("AtlasTexture_cmo1i")

[node name="UI" type="CanvasLayer" parent="."]

[node name="MarginContainer" type="MarginContainer" parent="UI"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 20
theme_override_constants/margin_top = 20
theme_override_constants/margin_right = 20
theme_override_constants/margin_bottom = 20

[node name="debug" type="VBoxContainer" parent="UI/MarginContainer"]
layout_mode = 2
size_flags_horizontal = 0
script = ExtResource("3_4f7fj")

[node name="FPS" type="Label" parent="UI/MarginContainer/debug"]
unique_name_in_owner = true
layout_mode = 2

[node name="position" type="Label" parent="UI/MarginContainer/debug"]
unique_name_in_owner = true
layout_mode = 2

[node name="mode" type="Label" parent="UI/MarginContainer/debug"]
unique_name_in_owner = true
layout_mode = 2

[node name="storage" type="Label" parent="UI/MarginContainer/debug"]
unique_name_in_owner = true
layout_mode = 2

[node name="health" type="Label" parent="UI/MarginContainer/debug"]
unique_name_in_owner = true
layout_mode = 2

[node name="stamina" type="Label" parent="UI/MarginContainer/debug"]
unique_name_in_owner = true
layout_mode = 2

[node name="mass" type="Label" parent="UI/MarginContainer/debug"]
unique_name_in_owner = true
layout_mode = 2

[node name="weapon_stats" type="Label" parent="UI/MarginContainer/debug"]
unique_name_in_owner = true
layout_mode = 2
text = "weapon (NONE)"

[node name="MarginContainer" type="MarginContainer" parent="UI/MarginContainer/debug"]
layout_mode = 2
theme_override_constants/margin_left = 20

[node name="indent" type="VBoxContainer" parent="UI/MarginContainer/debug/MarginContainer"]
layout_mode = 2
size_flags_horizontal = 0

[node name="aim_spread" type="Label" parent="UI/MarginContainer/debug/MarginContainer/indent"]
unique_name_in_owner = true
layout_mode = 2
text = "aim_spread:"

[node name="aim_time" type="Label" parent="UI/MarginContainer/debug/MarginContainer/indent"]
unique_name_in_owner = true
layout_mode = 2
text = "aim_time:"

[node name="fire_time" type="Label" parent="UI/MarginContainer/debug/MarginContainer/indent"]
unique_name_in_owner = true
layout_mode = 2
text = "fire_time:"

[node name="damage" type="Label" parent="UI/MarginContainer/debug/MarginContainer/indent"]
unique_name_in_owner = true
layout_mode = 2
text = "damage estimate (per bullet):"

[node name="ammo_compatible" type="Label" parent="UI/MarginContainer/debug/MarginContainer/indent"]
unique_name_in_owner = true
layout_mode = 2
text = "ammo_compatible:"

[node name="ammo_stats" type="Label" parent="UI/MarginContainer/debug/MarginContainer/indent"]
unique_name_in_owner = true
layout_mode = 2
text = "ammo (NONE): "

[node name="MarginContainer" type="MarginContainer" parent="UI/MarginContainer/debug/MarginContainer/indent"]
layout_mode = 2
theme_override_constants/margin_left = 20

[node name="indent" type="VBoxContainer" parent="UI/MarginContainer/debug/MarginContainer/indent/MarginContainer"]
layout_mode = 2
size_flags_horizontal = 0

[node name="ammo_texture" type="TextureRect" parent="UI/MarginContainer/debug/MarginContainer/indent/MarginContainer/indent"]
unique_name_in_owner = true
layout_mode = 2
stretch_mode = 2

[node name="num_ammo" type="Label" parent="UI/MarginContainer/debug/MarginContainer/indent/MarginContainer/indent"]
unique_name_in_owner = true
layout_mode = 2
text = "num_ammo:"

[node name="help_menu" type="MarginContainer" parent="UI"]
visible = false
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 100
theme_override_constants/margin_top = 100
theme_override_constants/margin_right = 100
theme_override_constants/margin_bottom = 100
script = ExtResource("5_i1eo7")

[node name="Panel" type="Panel" parent="UI/help_menu"]
layout_mode = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_cmo1i")

[node name="MarginContainer2" type="MarginContainer" parent="UI/help_menu/Panel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 80
theme_override_constants/margin_top = 80
theme_override_constants/margin_right = 80
theme_override_constants/margin_bottom = 80

[node name="message" type="RichTextLabel" parent="UI/help_menu/Panel/MarginContainer2"]
layout_mode = 2
text = "Controls:

Time only passes when you do something

- [wasd] to move
- [f] to equip target
- [g] to grab target (store in inventory)
- [shift] to sprint (depletes stamina faster)

- [mouse] to aim
- [mouse 2] to steady aim
- [mouse 1] to fire
- [r] to reload weapon (debug: gives you a full clip for free)

- [esc] to toggle this menu
- [?] to see this menu again"
